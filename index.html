<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Atelier de Documentos</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE0x1J9a9pcP5Vo0New+0PwQvlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root {
      --bg: #04060b;
      --panel: #0c101a;
      --panel-strong: #0f1523;
      --border: rgba(255,255,255,0.08);
      --text: #f6f7fb;
      --muted: #9aa3b5;
      --accent: #7fd8f2;
      --accent-2: #a28bff;
      --shadow: 0 25px 60px rgba(0,0,0,0.45);
      --radius: 14px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at 20% 20%, rgba(127, 216, 242, 0.08), transparent 25%),
                  radial-gradient(circle at 80% 10%, rgba(162, 139, 255, 0.08), transparent 20%),
                  linear-gradient(135deg, #04060b 0%, #0a0f19 100%);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.6;
      padding: 18px;
    }

    header {
      background: linear-gradient(90deg, rgba(127, 216, 242, 0.12), rgba(162, 139, 255, 0.16));
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 14px 18px;
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 18px;
      align-items: center;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 800;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      color: #0f1523;
      background: #f6f7fb;
      padding: 10px 14px;
      border-radius: 12px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.35);
    }

    .brand span { color: #6b4bff; }

    .toolbar-actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .pill-btn {
      background: rgba(255,255,255,0.06);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 999px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: transform 0.15s, border-color 0.2s, background 0.2s;
      font-weight: 600;
    }

    .pill-btn:hover { transform: translateY(-1px); border-color: rgba(127,216,242,0.5); background: rgba(127,216,242,0.08); }

    .primary { background: linear-gradient(120deg, #7fd8f2, #a28bff); color: #0c101a; border-color: transparent; }

    .chips { display: flex; gap: 6px; flex-wrap: wrap; }
    .chip { padding: 8px 12px; border-radius: 12px; border: 1px solid var(--border); color: var(--muted); background: rgba(255,255,255,0.04); font-size: 13px; }

    main { margin-top: 18px; display: grid; gap: 18px; }

    .hero {
      display: grid;
      gap: 18px;
      grid-template-columns: 1.2fr 1fr;
    }

    .panel {
      background: rgba(12,16,26,0.9);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
    }

    .panel::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 70% 0%, rgba(127, 216, 242, 0.08), transparent 30%);
      pointer-events: none;
    }

    .hero .panel h2 { margin: 0 0 6px; font-size: 24px; }
    .muted { color: var(--muted); }

    .actions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin-top: 14px;
    }

    .action-card {
      background: var(--panel-strong);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      display: grid;
      gap: 8px;
      cursor: pointer;
      transition: transform 0.15s, border-color 0.2s, background 0.2s;
      position: relative;
      overflow: hidden;
    }

    .action-card:hover { transform: translateY(-2px); border-color: rgba(162,139,255,0.5); background: rgba(162,139,255,0.08); }
    .action-card i { color: #a8ffef; font-size: 18px; }
    .tag { display: inline-flex; align-items: center; gap: 6px; font-size: 12px; color: var(--muted); }

    .templates-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 12px;
      margin-top: 14px;
    }

    .template-card {
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      display: grid;
      gap: 6px;
      cursor: pointer;
      transition: border-color 0.2s, transform 0.15s, box-shadow 0.2s;
    }

    .template-card:hover { border-color: rgba(127,216,242,0.6); transform: translateY(-2px); box-shadow: var(--shadow); }
    .template-card .title { font-weight: 700; }
    .template-card .meta { color: var(--muted); font-size: 13px; }

    .workspace {
      display: grid;
      grid-template-columns: 0.9fr 1.1fr 1.1fr;
      gap: 14px;
    }

    .stack { display: grid; gap: 10px; }
    .subtitle { margin: 0; font-weight: 700; letter-spacing: 0.6px; text-transform: uppercase; color: var(--muted); font-size: 12px; }
    .list { display: grid; gap: 8px; margin: 0; padding: 0; list-style: none; }
    .list li { padding: 10px 12px; background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 12px; }

    .doc-editor {
      border: 1px solid var(--border);
      border-radius: 16px;
      background: linear-gradient(145deg, #0b1021 0%, #0c0f1a 40%, #0f1323 100%);
      box-shadow: var(--shadow);
      padding: 16px;
      display: grid;
      gap: 10px;
    }

    .doc-editor header {
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.04);
    }

    .doc-editor header button {
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 10px;
      padding: 8px 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.2s, transform 0.15s, border-color 0.2s;
      font-weight: 600;
    }

    .doc-editor header button:hover { background: rgba(127,216,242,0.12); border-color: rgba(127,216,242,0.6); transform: translateY(-1px); }

    #doc-area {
      min-height: 320px;
      border: 1px dashed var(--border);
      border-radius: 12px;
      padding: 14px;
      background: rgba(255,255,255,0.02);
      overflow: auto;
    }

    #doc-area[contenteditable="true"]:focus { outline: 2px solid rgba(162, 139, 255, 0.5); }

    .doc-footer { display: flex; justify-content: space-between; color: var(--muted); font-size: 13px; }

    .code-lab {
      background: linear-gradient(180deg, rgba(12,20,36,0.92), rgba(12,20,36,0.82));
      border: 1px solid var(--border);
      border-radius: 16px;
      box-shadow: var(--shadow);
      padding: 14px;
      display: grid;
      gap: 10px;
    }

    .code-lab textarea {
      width: 100%;
      min-height: 240px;
      background: #0a0f19;
      color: #d2f1ff;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      font-family: "JetBrains Mono", monospace;
      font-size: 14px;
      resize: vertical;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
    }

    .assist-bar { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    .assist-pill { background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 999px; padding: 8px 10px; font-size: 13px; color: var(--muted); display: inline-flex; gap: 6px; }

    .suggestions { display: grid; gap: 8px; }
    .suggestion { padding: 10px; background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 10px; cursor: pointer; transition: border-color 0.2s, transform 0.15s; }
    .suggestion:hover { border-color: rgba(127,216,242,0.6); transform: translateY(-1px); }
    .suggestion strong { display: block; }
    .warning { color: #ffb37f; }
    .success { color: #8af0c9; }

    .lint-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }
    .lint-item { padding: 8px 10px; border-radius: 10px; border: 1px solid var(--border); background: rgba(255,255,255,0.03); font-size: 13px; display: flex; gap: 8px; align-items: center; }

    footer { margin-top: 12px; text-align: center; color: var(--muted); font-size: 13px; }
    .status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; background: #8af0c9; }

    @media (max-width: 1100px) {
      .workspace { grid-template-columns: 1fr; }
      .hero { grid-template-columns: 1fr; }
      header { grid-template-columns: 1fr; justify-items: center; text-align: center; }
      .toolbar-actions { justify-content: center; }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">Atelier <span>Documentos</span></div>
    <div class="chips">
      <div class="chip"><i class="fa-regular fa-circle-check"></i> Auto guardado</div>
      <div class="chip"><i class="fa-regular fa-lightbulb"></i> Sugerencias contextuales</div>
      <div class="chip"><i class="fa-solid fa-bolt"></i> Plantillas instantáneas</div>
    </div>
    <div class="toolbar-actions">
      <button class="pill-btn" id="btn-import"><i class="fa-solid fa-file-import"></i> Importar archivo</button>
      <button class="pill-btn primary" id="btn-start"><i class="fa-solid fa-wand-magic-sparkles"></i> Nueva sesión</button>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="panel">
        <h2>Menú de inicio</h2>
        <p class="muted">Crea documentos desde cero o parte de una plantilla. Todo está organizado para que escribir y prototipar código sea más intuitivo.</p>
        <div class="actions-grid">
          <div class="action-card" data-action="blank">
            <div class="tag"><i class="fa-solid fa-file"></i> Documento en blanco</div>
            <strong>Escribir desde cero</strong>
            <span class="muted">Área limpia con estilo editorial listo para personalizar.</span>
          </div>
          <div class="action-card" data-action="template">
            <div class="tag"><i class="fa-solid fa-shapes"></i> Galería</div>
            <strong>Explorar plantillas</strong>
            <span class="muted">Formatos curados para informes, cartas y guías técnicas.</span>
          </div>
          <div class="action-card" data-action="code">
            <div class="tag"><i class="fa-solid fa-code"></i> Modo código</div>
            <strong>Atajos inteligentes</strong>
            <span class="muted">Autocompletado, bloques reutilizables y detector de errores inmediato.</span>
          </div>
          <div class="action-card" data-action="recent">
            <div class="tag"><i class="fa-regular fa-clock"></i> Recientes</div>
            <strong>Volver al último</strong>
            <span class="muted">Recupera tu última sesión con un clic.</span>
          </div>
        </div>
      </div>
      <div class="panel">
        <h2>Plantillas destacadas</h2>
        <p class="muted">Elige un formato base. Puedes mezclar y reorganizar las secciones con el planificador.</p>
        <div class="templates-grid" id="templates"></div>
      </div>
    </section>

    <section class="workspace">
      <div class="panel stack">
        <p class="subtitle">Planificador</p>
        <p class="muted">Define la estructura y supervisa el estado de tu documento.</p>
        <ul class="list" id="outline-list"></ul>
        <div class="list">
          <div class="lint-item"><span class="status-dot"></span> Guardado en vivo activado</div>
          <div class="lint-item"><i class="fa-solid fa-bolt"></i> Sugerencias contextuales mientras escribes</div>
          <div class="lint-item"><i class="fa-solid fa-shield-halved"></i> Detección rápida de errores de sintaxis</div>
        </div>
      </div>

      <div class="doc-editor">
        <header>
          <button data-format="bold"><i class="fa-solid fa-bold"></i> Negrita</button>
          <button data-format="italic"><i class="fa-solid fa-italic"></i> Cursiva</button>
          <button data-format="insertUnorderedList"><i class="fa-solid fa-list-ul"></i> Lista</button>
          <button id="btn-template"><i class="fa-solid fa-layer-group"></i> Aplicar plantilla</button>
          <button id="btn-clean"><i class="fa-solid fa-eraser"></i> Limpiar</button>
        </header>
        <div id="doc-area" contenteditable="true"></div>
        <div class="doc-footer">
          <span id="status">Sesión lista</span>
          <span id="counter">0 caracteres</span>
        </div>
      </div>

      <div class="code-lab">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <p class="subtitle" style="margin:0;">Laboratorio de código</p>
            <small class="muted">Escribe lógica, recibe autocompletado y alertas de errores.</small>
          </div>
          <div class="assist-bar">
            <span class="assist-pill"><i class="fa-solid fa-wand-magic-sparkles"></i> Snippets</span>
            <span class="assist-pill"><i class="fa-solid fa-bug"></i> Linter en vivo</span>
          </div>
        </div>
        <textarea id="code-area" placeholder="function nuevaCaracteristica() {\n  // Tu idea aquí\n}"></textarea>
        <div class="suggestions" id="suggestions"></div>
        <ul class="lint-list" id="lint"></ul>
      </div>
    </section>
  </main>

  <footer>Diseñado para escribir mejor, más rápido. Mantén el flujo creativo mientras el asistente cuida los detalles.</footer>

  <input type="file" id="file-input" accept=".txt,.md,.docx,.json" style="display:none" />

  <script>
    const templates = [
      {
        title: 'Informe ejecutivo',
        type: 'Negocio',
        summary: 'Resultados, riesgos y próximos pasos en un vistazo.',
        content: `# Informe Ejecutivo\n\n## Resumen\nDescribe los hallazgos principales y su impacto.\n\n## Métricas clave\n- Indicador 1\n- Indicador 2\n\n## Riesgos\n- Riesgo y plan de mitigación.\n\n## Próximos pasos\n- Acción inmediata\n- Responsable y fecha.`,
        outline: ['Resumen', 'Métricas', 'Riesgos', 'Próximos pasos']
      },
      {
        title: 'Carta formal',
        type: 'Comunicación',
        summary: 'Saludo, motivo, petición y despedida clara.',
        content: `Ciudad, Fecha\n\nEstimado/a [Nombre]:\n\nExpón el motivo de tu carta con claridad.\n\nAgradece la atención y ofrece un canal de respuesta.\n\nAtentamente,\n[Tu nombre]`,
        outline: ['Encabezado', 'Motivo', 'Cierre']
      },
      {
        title: 'Nota técnica',
        type: 'Ingeniería',
        summary: 'Contexto, arquitectura y decisiones tomadas.',
        content: `# Nota técnica\n\n## Contexto\nPor qué existe esta solución.\n\n## Arquitectura\n- Componentes principales\n- Dependencias clave\n\n## Decisiones\n- Decisión tomada (fecha)\n- Alternativa descartada y motivo`,
        outline: ['Contexto', 'Arquitectura', 'Decisiones']
      },
      {
        title: 'Propuesta creativa',
        type: 'Diseño',
        summary: 'Objetivo, idea fuerza y plan de lanzamiento.',
        content: `# Propuesta creativa\n\n## Objetivo\nDefine el impacto buscado.\n\n## Idea fuerza\nQué hace única a esta propuesta.\n\n## Plan de lanzamiento\n- Audiencia\n- Mensaje principal\n- Canales y tiempos`,
        outline: ['Objetivo', 'Idea fuerza', 'Plan de lanzamiento']
      }
    ];

    const suggestions = [
      { label: 'función utilitaria', snippet: 'function util(nombre) {\n  console.log(`Listo ${nombre}`);\n}\n', description: 'Plantilla base para funciones reutilizables.' },
      { label: 'hook asíncrono', snippet: 'async function cargarDatos(url) {\n  const res = await fetch(url);\n  if (!res.ok) throw new Error("Error de red");\n  return res.json();\n}\n', description: 'Manejo de errores y fetch en una sola rutina.' },
      { label: 'componente UI', snippet: 'const Boton = ({ texto, onClick }) => {\n  return `<button class=\"btn\" onclick=\\\"${onClick}\\\">${texto}</button>`;\n};\n', description: 'Esqueleto de componente rápido para prototipos.' },
      { label: 'prueba rápida', snippet: 'function assert(cond, mensaje) {\n  if(!cond) throw new Error(mensaje || "Fallo en la prueba");\n}\n', description: 'Valida supuestos sin depender de frameworks.' }
    ];

    const outlineList = document.getElementById('outline-list');
    const docArea = document.getElementById('doc-area');
    const counter = document.getElementById('counter');
    const status = document.getElementById('status');
    const templatesGrid = document.getElementById('templates');
    const codeArea = document.getElementById('code-area');
    const suggestionsBox = document.getElementById('suggestions');
    const lintList = document.getElementById('lint');
    const fileInput = document.getElementById('file-input');

    let activeTemplate = null;

    function renderTemplates() {
      templatesGrid.innerHTML = '';
      templates.forEach((tpl, idx) => {
        const card = document.createElement('div');
        card.className = 'template-card';
        card.innerHTML = `
          <div class="title">${tpl.title}</div>
          <div class="meta">${tpl.type}</div>
          <div class="muted">${tpl.summary}</div>
        `;
        card.addEventListener('click', () => applyTemplate(idx));
        templatesGrid.appendChild(card);
      });
    }

    function applyTemplate(index) {
      const tpl = templates[index];
      activeTemplate = tpl;
      docArea.innerText = tpl.content;
      updateOutline(tpl.outline);
      updateStatus(`Plantilla "${tpl.title}" aplicada.`);
      docArea.focus();
    }

    function updateOutline(items = []) {
      outlineList.innerHTML = '';
      if (!items.length) {
        outlineList.innerHTML = '<li>Sin secciones definidas. Usa el planificador para añadir ideas clave.</li>';
        return;
      }
      items.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        outlineList.appendChild(li);
      });
    }

    function updateStatus(message) {
      status.textContent = message;
      status.style.color = '#8af0c9';
      setTimeout(() => { status.style.color = 'var(--muted)'; }, 1200);
    }

    function updateCounter() {
      const length = docArea.innerText.trim().length;
      counter.textContent = `${length} caracteres`;
    }

    function bindFormatting() {
      document.querySelectorAll('[data-format]').forEach(btn => {
        btn.addEventListener('click', () => {
          document.execCommand(btn.dataset.format, false, null);
          docArea.focus();
          updateCounter();
        });
      });
    }

    function handleActions() {
      document.querySelectorAll('.action-card').forEach(card => {
        card.addEventListener('click', () => {
          const action = card.dataset.action;
          if (action === 'blank') resetDocument();
          if (action === 'template') templatesGrid.scrollIntoView({ behavior: 'smooth' });
          if (action === 'code') codeArea.focus();
          if (action === 'recent') loadRecent();
        });
      });
      document.getElementById('btn-clean').addEventListener('click', resetDocument);
      document.getElementById('btn-template').addEventListener('click', () => applyTemplate(0));
      document.getElementById('btn-import').addEventListener('click', () => fileInput.click());
      document.getElementById('btn-start').addEventListener('click', resetDocument);
    }

    function resetDocument() {
      activeTemplate = null;
      docArea.innerHTML = '<h2>Título del documento</h2><p>Empieza a escribir tu contenido o aplica una plantilla.</p>';
      updateOutline([]);
      updateStatus('Documento en blanco preparado.');
      updateCounter();
      saveSession();
    }

    function loadRecent() {
      const saved = localStorage.getItem('atelier-doc');
      if (saved) {
        const payload = JSON.parse(saved);
        docArea.innerHTML = payload.content;
        updateOutline(payload.outline || []);
        updateStatus('Sesión recuperada.');
        updateCounter();
      } else {
        updateStatus('No hay sesiones previas.');
      }
    }

    function saveSession() {
      const data = {
        content: docArea.innerHTML,
        outline: [...outlineList.children].map(li => li.textContent)
      };
      localStorage.setItem('atelier-doc', JSON.stringify(data));
    }

    function initDocArea() {
      docArea.addEventListener('input', () => {
        updateCounter();
        saveSession();
      });
    }

    function handleFileImport() {
      fileInput.addEventListener('change', e => {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (ev) => {
          docArea.innerText = ev.target.result;
          updateOutline([]);
          updateStatus(`Importado: ${file.name}`);
          updateCounter();
          saveSession();
        };
        reader.readAsText(file);
      });
    }

    function renderSuggestions(prefix = '') {
      suggestionsBox.innerHTML = '';
      const filtered = suggestions.filter(s => s.label.toLowerCase().includes(prefix.toLowerCase()));
      filtered.forEach(s => {
        const card = document.createElement('div');
        card.className = 'suggestion';
        card.innerHTML = `<strong>${s.label}</strong><span class="muted">${s.description}</span>`;
        card.addEventListener('click', () => {
          insertSnippet(s.snippet);
        });
        suggestionsBox.appendChild(card);
      });
      if (!filtered.length) {
        suggestionsBox.innerHTML = '<div class="muted">Sin sugerencias para este contexto.</div>';
      }
    }

    function insertSnippet(text) {
      const cursorPos = codeArea.selectionStart;
      const before = codeArea.value.substring(0, cursorPos);
      const after = codeArea.value.substring(cursorPos);
      codeArea.value = before + text + after;
      codeArea.focus();
      codeArea.selectionStart = codeArea.selectionEnd = cursorPos + text.length;
      lintCode();
    }

    function lintCode() {
      const code = codeArea.value;
      const issues = [];
      const stack = [];
      const pairs = { '{': '}', '(': ')', '[': ']' };

      for (let i = 0; i < code.length; i++) {
        const ch = code[i];
        if (pairs[ch]) stack.push({ ch, index: i });
        if (Object.values(pairs).includes(ch)) {
          const last = stack.pop();
          if (!last || pairs[last.ch] !== ch) {
            issues.push({ type: 'error', message: `Cierre inesperado de ${ch} en el carácter ${i}` });
          }
        }
      }
      while (stack.length) {
        const unclosed = stack.pop();
        issues.push({ type: 'error', message: `Falta cerrar ${pairs[unclosed.ch]} para el símbolo en posición ${unclosed.index}` });
      }

      const lines = code.split('\n');
      lines.forEach((line, idx) => {
        if (/console\.log\s*\(\s*['"]debug/.test(line)) {
          issues.push({ type: 'warn', message: `L${idx + 1}: recuerda retirar logs de depuración.` });
        }
        if (/TODO/i.test(line)) {
          issues.push({ type: 'warn', message: `L${idx + 1}: hay una tarea pendiente (TODO).` });
        }
      });

      renderLint(issues);
    }

    function renderLint(items) {
      lintList.innerHTML = '';
      if (!items.length) {
        lintList.innerHTML = '<li class="lint-item success"><i class="fa-solid fa-circle-check"></i> Sin alertas encontradas.</li>';
        return;
      }
      items.forEach(item => {
        const li = document.createElement('li');
        li.className = 'lint-item';
        li.innerHTML = `${item.type === 'error' ? '<i class="fa-solid fa-triangle-exclamation warning"></i>' : '<i class="fa-solid fa-circle-info"></i>'} ${item.message}`;
        lintList.appendChild(li);
      });
    }

    function handleCodeInput() {
      codeArea.addEventListener('input', () => {
        const line = getCurrentLine();
        renderSuggestions(line.trim());
        lintCode();
      });
    }

    function getCurrentLine() {
      const cursor = codeArea.selectionStart;
      const untilCursor = codeArea.value.slice(0, cursor);
      const parts = untilCursor.split('\n');
      return parts[parts.length - 1];
    }

    function init() {
      renderTemplates();
      bindFormatting();
      handleActions();
      initDocArea();
      handleFileImport();
      handleCodeInput();
      resetDocument();
      renderSuggestions();
      lintCode();
    }

    init();
  </script>
</body>
</html>
